(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44dfdc00"],{"11f9":function(t,e,a){"use strict";var n=a("c059"),i=a.n(n);i.a},"1eea":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return r})),a.d(e,"g",(function(){return c})),a.d(e,"f",(function(){return s})),a.d(e,"d",(function(){return l})),a.d(e,"e",(function(){return u}));var n=a("b775");function i(t,e){return Object(n["a"])({url:"/api/users/".concat(t,"/activities/applications"),method:"post",data:e})}function o(t){return Object(n["a"])({url:"/api/admin/activities/applications",method:"get",params:t})}function r(t,e){return Object(n["a"])({url:"/api/admin/activities/applications/".concat(t,"/confirmation"),method:"put",params:e})}function c(t,e){return Object(n["a"])({url:"/api/admin/activities/applications/".concat(t,"/rejection"),method:"put",params:e})}function s(t){return Object(n["a"])({url:"/api/admin/activities/applications",method:"get",params:t})}function l(){return Object(n["a"])({url:"/api/admin/activities/applications/progress/count",method:"get"})}function u(t,e){return Object(n["a"])({url:"/api/users/".concat(t,"/activities/applications/").concat(e),method:"get"})}},2179:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return o})),a.d(e,"d",(function(){return r})),a.d(e,"b",(function(){return c}));var n=a("b775");function i(t){return Object(n["a"])({url:"/api/admin/power/applications",method:"get",params:t})}function o(t,e){return Object(n["a"])({url:"/api/admin/power/applications/".concat(t,"/confirmation"),method:"put",params:e})}function r(t,e){return Object(n["a"])({url:"/api/admin/power/applications/".concat(t,"/rejection"),method:"put",params:e})}function c(){return Object(n["a"])({url:"/api/admin/power/applications/progress/count",method:"get"})}},2423:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return o})),a.d(e,"e",(function(){return r})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return s}));var n=a("b775");function i(t){return Object(n["a"])({url:"/api/admin/articles",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/api/admin/articles",method:"get",params:t})}function r(t,e){return Object(n["a"])({url:"/api/admin/articles/".concat(t),method:"put",data:e})}function c(t){return Object(n["a"])({url:"/api/admin/articles/".concat(t),method:"get"})}function s(){return Object(n["a"])({url:"/api/admin/articles/latest",method:"get"})}},"28b6":function(t,e,a){"use strict";var n=a("2638"),i=a.n(n),o=(a("456d"),a("ac6a"),a("7618")),r=(a("6762"),a("2fdb"),a("7f7f"),a("db72")),c=(a("c5f6"),a("372e")),s=a("c832"),l=a.n(s),u=a("4360");e["a"]={data:function(){return{needTotalList:[],selectedRows:[],selectedRowKeys:[],localLoading:!1,localDataSource:[],localPagination:Object.assign({},this.pagination)}},props:Object.assign({},c["a"].props,{rowKey:{type:[String,Function],default:"key"},data:{type:Function,required:!0},pageNum:{type:Number,default:1},pageSize:{type:Number,default:u["a"].getters.pageSize},showSizeChanger:{type:Boolean,default:!1},size:{type:String,default:"default"},alert:{type:[Object,Boolean],default:null},rowSelection:{type:Object,default:null},showAlertInfo:{type:Boolean,default:!1},showPagination:{type:String|Boolean,default:"auto"},pageUrl:{type:Boolean,default:!0}}),watch:{"localPagination.current":function(t){this.pageUrl&&this.$router.push(Object(r["a"])({},this.$route,{name:this.$route.name,params:Object.assign({},this.$route.params,{pageNo:t})}))},pageNum:function(t){Object.assign(this.localPagination,{current:t})},pageSize:function(t){Object.assign(this.localPagination,{pageSize:t})},showSizeChanger:function(t){Object.assign(this.localPagination,{showSizeChanger:t})}},created:function(){var t=this.$route.params.pageNo,e=this.pageUrl&&t&&parseInt(t)||this.pageNum;this.localPagination=["auto",!0].includes(this.showPagination)&&Object.assign({},this.localPagination,{current:e,pageSize:this.pageSize,showSizeChanger:this.showSizeChanger})||!1,console.log("this.localPagination",this.localPagination),this.needTotalList=this.initTotalList(this.columns),this.loadData()},methods:{refresh:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(this.localPagination=Object.assign({},{current:1,pageSize:this.pageSize})),this.loadData()},loadData:function(t,e,a){var n=this;this.localLoading=!0;var i=Object.assign({page:t&&t.current||this.showPagination&&this.localPagination.current||this.pageNum},a&&a.field&&{sortField:a.field}||{},a&&a.order&&{sortOrder:a.order}||{},Object(r["a"])({},e));console.log("parameter",i);var c=this.data(i);"object"!==Object(o["a"])(c)&&"function"!==typeof c||"function"!==typeof c.then||c.then((function(e){if(n.localPagination=n.showPagination&&Object.assign({},n.localPagination,{current:e.current_page,total:e.total,showSizeChanger:n.showSizeChanger,pageSize:t&&t.pageSize||n.localPagination.pageSize})||!1,0===e.data.length&&n.showPagination&&n.localPagination.current>1)return n.localPagination.current--,void n.loadData();try{["auto",!0].includes(n.showPagination)&&e.total<=e.current_page*n.localPagination.pageSize&&(n.localPagination.hideOnSinglePage=!0)}catch(a){n.localPagination=!1}console.log("loadData -> this.localPagination",n.localPagination),n.localDataSource=e.data,n.localLoading=!1}))},initTotalList:function(t){var e=[];return t&&t instanceof Array&&t.forEach((function(t){t.needTotal&&e.push(Object(r["a"])({},t,{total:0}))})),e},updateSelect:function(t,e){this.selectedRows=e,this.selectedRowKeys=t;var a=this.needTotalList;this.needTotalList=a.map((function(t){return Object(r["a"])({},t,{total:e.reduce((function(e,a){var n=e+parseInt(l()(a,t.dataIndex));return isNaN(n)?0:n}),0)})}))},clearSelected:function(){this.rowSelection&&(this.rowSelection.onChange([],[]),this.updateSelect([],[]))},renderClear:function(t){var e=this,a=this.$createElement;return this.selectedRowKeys.length<=0?null:a("a",{style:"margin-left: 24px",on:{click:function(){t(),e.clearSelected()}}},["清空"])},renderAlert:function(){var t=this.$createElement,e=this.needTotalList.map((function(e){return t("span",{style:"margin-right: 12px"},[e.title,"总计 ",t("a",{style:"font-weight: 600"},[e.customRender?e.customRender(e.total):e.total])])})),a="boolean"===typeof this.alert.clear&&this.alert.clear?this.renderClear(this.clearSelected):null!==this.alert&&"function"===typeof this.alert.clear?this.renderClear(this.alert.clear):null;return t("a-alert",{attrs:{showIcon:!0},style:"margin-bottom: 16px"},[t("template",{slot:"message"},[t("span",{style:"margin-right: 12px"},["已选择: ",t("a",{style:"font-weight: 600"},[this.selectedRows.length])]),e,a])])}},render:function(){var t=this,e=arguments[0],a={},n=Object.keys(this.$data),s="object"===Object(o["a"])(this.alert)&&null!==this.alert&&this.alert.show&&"undefined"!==typeof this.rowSelection.selectedRowKeys||this.alert;Object.keys(c["a"].props).forEach((function(e){var i="local".concat(e.substring(0,1).toUpperCase()).concat(e.substring(1));if(n.includes(i))return a[e]=t[i],a[e];if("rowSelection"===e){if(s&&t.rowSelection)return console.log("this.rowSelection",t.rowSelection),a[e]=Object(r["a"])({},t.rowSelection,{selectedRows:t.selectedRows,selectedRowKeys:t.selectedRowKeys,onChange:function(a,n){t.updateSelect(a,n),"undefined"!==typeof t[e].onChange&&t[e].onChange(a,n)}}),a[e];if(!t.rowSelection)return a[e]=null,a[e]}return t[e]&&(a[e]=t[e]),a[e]}));var l=e("a-table",i()([{},{props:a,scopedSlots:Object(r["a"])({},this.$scopedSlots)},{on:{change:this.loadData,expand:function(e,a){t.$emit("expand",e,a)}}}]),[Object.keys(this.$slots).map((function(a){return e("template",{slot:a},[t.$slots[a]])}))]);return e("div",{class:"table-wrapper"},[s?this.renderAlert():null,l])}}},"3f2c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("keep-alive",[a("div",{staticClass:"dashboard-container"},[a("a-row",{staticClass:"row"},[a("a-col",{attrs:{span:24}},[a("dash-card",{on:{click:t.handleDashCardClick}})],1)],1),t._v(" "),a("a-row",{staticClass:"row",attrs:{gutter:30}},[a("a-col",{staticClass:"col",attrs:{span:8}},[a("notice-card")],1),t._v(" "),a("a-col",{staticClass:"col",attrs:{span:16}},[a("hot-activity-card")],1)],1)],1)])},i=[],o=(a("7f7f"),a("c69f")),r=a("98c7"),c=a("e411"),s={name:"DashboardAdmin",components:{DashCard:o["default"],HotActivityCard:r["default"],NoticeCard:c["default"]},data:function(){return{hotActivityList:[]}},methods:{handleDashCardClick:function(t){var e=t.name;switch(e){case"activity":this.$router.push({path:"/activity/manage"});break;case"power_application":this.$router.push({path:"/application/power"});break;case"activity_application":this.$router.push({path:"/application/activity"});break}}}},l=s,u=(a("bd80"),a("2877")),d=Object(u["a"])(l,n,i,!1,null,"07c7b970",null);e["default"]=d.exports},9406:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[a(t.currentRole,{tag:"component"})],1)},i=[],o=(a("6762"),a("2fdb"),a("db72")),r=a("2f62"),c=a("fa7d"),s=a("3f2c"),l={name:"Dashboard",components:{adminDashboard:s["default"]},data:function(){return{currentRole:"adminDashboard"}},computed:Object(o["a"])({},Object(r["c"])(["roles"])),created:function(){this.roles.includes("admin"),this.welcome()},methods:{welcome:function(){var t=this;window.localStorage.isDashboardTiped||(setTimeout((function(){t.$notification.success({message:"您好",description:"".concat(Object(c["g"])(),"，欢迎回来")})}),1e3),window.localStorage.isDashboardTiped=!0)}}},u=l,d=a("2877"),f=Object(d["a"])(u,n,i,!1,null,null,null);e["default"]=f.exports},"98c7":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("common-card-frame",{attrs:{title:"热门活动",hoverable:""}},[a("template",{slot:"body"},[a("div",{staticClass:"table"},[a("common-table",{attrs:{columns:t.columns,data:t.loadData,"row-key":"id",bordered:"","show-pagination":!1}})],1)])],2)],1)},i=[],o=a("28b6"),r=a("ca41"),c=a("b212"),s=[{title:"id",dataIndex:"id"},{title:"名称",dataIndex:"name"},{title:"浏览量",dataIndex:"views"}],l={components:{CommonTable:o["a"],CommonCardFrame:c["a"]},data:function(){var t=this;return{columns:s,loadData:function(e){return t.listLoading=!0,Object(r["h"])().then((function(e){if(e.status)return e.data;t.listLoading=!1}))},listLoading:!1}},created:function(){},methods:{}},u=l,d=(a("11f9"),a("2877")),f=Object(d["a"])(u,n,i,!1,null,"79b63745",null);e["default"]=f.exports},a78c:function(t,e,a){"use strict";var n=a("beee"),i=a.n(n);i.a},b212:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("a-card",{attrs:{title:t.title,hoverable:t.hoverable,"body-style":t.bodyStyle,bordered:t.bordered}},[a("template",{slot:"extra"},[t._t("extra")],2),t._v(" "),t._t("body"),t._v(" "),t._t("actions")],2)],1)},i=[],o={props:{title:{type:String,default:""},bodyStyle:{type:Object,default:function(){return{}}},hoverable:{type:Boolean,default:!1},bordered:{type:Boolean,default:!0}},data:function(){return{}}},r=o,c=a("2877"),s=Object(c["a"])(r,n,i,!1,null,null,null);e["a"]=s.exports},bd80:function(t,e,a){"use strict";var n=a("fb90"),i=a.n(n);i.a},beee:function(t,e,a){},c059:function(t,e,a){},c69f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container"},[a("a-row",{attrs:{gutter:40}},t._l(t.cardData,(function(e){return a("a-col",{key:e.name,staticClass:"col",attrs:{span:8},on:{click:function(){t.$emit("click",e)}}},[a("common-card-frame",{attrs:{hoverable:""}},[a("template",{slot:"body"},[a("a-row",[a("a-col",{attrs:{span:18}},[a("a-statistic",{staticStyle:{"margin-right":"50px"},attrs:{title:t._f("title")(e.name),value:e.count}})],1),t._v(" "),a("a-col",{attrs:{span:6}},[a("svg-icon",{attrs:{"icon-class":t._f("icon")(e.name),"class-name":"icon-class"}})],1)],1)],1)],2)],1)})),1)],1)},i=[],o=(a("ac6a"),a("5df3"),a("ca41")),r=a("1eea"),c=a("2179"),s=a("b212"),l={components:{CommonCardFrame:s["a"]},filters:{title:function(t){switch(t){case"activity":return"进行中活动";case"activity_application":return"待审批活动";case"power_application":return"待审批权限"}},icon:function(t){if("activity_application"===t)return"approvel-dashboard";var e=t.indexOf("_");return"".concat(-1===e?t:t.substr(0,e),"-dashboard")}},data:function(){return{cardData:[],loading:!1}},created:function(){this.init()},methods:{handleSetLineChartData:function(t){this.$emit("handleSetLineChartData",t)},init:function(){this.getAll()},inProgressActivityCount:function(){return new Promise((function(t){Object(o["d"])().then((function(e){t({count:e.data.count,name:"activity"})}))}))},inProgressActivityApplicationCount:function(){return new Promise((function(t){Object(r["d"])().then((function(e){t({count:e.data.count,name:"activity_application"})}))}))},inProgressPowerApplicationCount:function(){return new Promise((function(t){Object(c["b"])().then((function(e){t({count:e.data.count,name:"power_application"})}))}))},getAll:function(){var t=this;this.loading=!0,Promise.all([this.inProgressActivityCount(),this.inProgressPowerApplicationCount(),this.inProgressActivityApplicationCount()]).then((function(e){t.cardData=e})).finally((function(){t.loading=!1}))}}},u=l,d=(a("a78c"),a("2877")),f=Object(d["a"])(u,n,i,!1,null,"76568465",null);e["default"]=f.exports},e411:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("common-card-frame",{attrs:{title:"通知通告"}},[a("template",{slot:"body"},[a("a-list",{attrs:{"item-layout":"horizontal","data-source":t.list,loading:t.loading},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{},[a("a-list-item-meta",[a("template",{slot:"description"},[a("p",[t._v(t._s(t._f("moment")(e.created_at)))])]),t._v(" "),a("a",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))]),t._v(" "),a("a-avatar",{attrs:{slot:"avatar",src:e.user.avatar},slot:"avatar"})],2)],1)}}])})],1)],2)],1)},i=[];a("28a5"),a("f576"),a("a481"),a("6b54"),a("7618");var o=a("2423"),r=a("b212"),c={components:{CommonCardFrame:r["a"]},data:function(){return{list:[],loading:!1}},created:function(){this.init()},methods:{init:function(){this.getLatestArticle()},getLatestArticle:function(){var t=this;this.loading=!0,Object(o["c"])().then((function(e){t.list=e.data,t.loading=!1}))}}},s=c,l=a("2877"),u=Object(l["a"])(s,n,i,!1,null,null,null);e["default"]=u.exports},fa7d:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return c})),a.d(e,"d",(function(){return s})),a.d(e,"g",(function(){return l})),a.d(e,"e",(function(){return u})),a.d(e,"a",(function(){return d})),a.d(e,"f",(function(){return f}));a("6b54"),a("456d"),a("ac6a");var n=a("7618"),i=a("c1df"),o=a.n(i);function r(t){return JSON.parse(JSON.stringify(t))}function c(t){for(var e in t){var a=t[e];if("object"===Object(n["a"])(a)){if(Array.isArray(a)&&0===a.length){delete t[e];continue}this.deleteEmptyProperty(a),this.isEmpty(a)&&delete t[e]}else""!==a&&null!==a&&void 0!==a&&"undefined"!==a||delete t[e]}}function s(t,e){var a=[];try{for(var n=function e(n){if(a.push(n.id),n.id===t)throw a;if(n.children&&n.children.length>0){for(var i=0;i<n.children.length;i++)e(n.children[i]);a.pop()}else a.pop()},i=0;i<e.length;i++)n(e[i])}catch(o){return a}}function l(){var t=new Date,e=t.getHours();return e<9?"早上好":e<=11?"上午好":e<=13?"中午好":e<20?"下午好":"晚上好"}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return o()(t).format(e)}function d(t){return Object.keys(t).forEach((function(e){void 0!==t[e]&&""!==t[e]||delete t[e]})),t}function f(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)}},fb90:function(t,e,a){}}]);