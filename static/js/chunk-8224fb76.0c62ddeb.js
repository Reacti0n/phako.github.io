(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8224fb76"],{"12a6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("a-form",{staticStyle:{"max-width":"500px",margin:"0 auto 0"},attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"真实姓名","label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["real_name",{rules:[{required:!0,message:"请输入您的真实姓名"}]}],expression:"['real_name', { rules: [{ required: true, message: '请输入您的真实姓名' }] }]"}],attrs:{placeholder:"请输入您的真实姓名"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"学号/教工号","label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["stu_num",{rules:[{required:!0,message:"请填写学号或教工号"}]}],expression:"['stu_num', { rules: [{ required: true, message: '请填写学号或教工号' }] }]"}],attrs:{placeholder:"请填写学号或教工号"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"个人介绍","label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["introduce",{rules:[{required:!0,message:"请填写个人介绍，字数应小于50字。"}]}],expression:"[\n          'introduce',\n          {\n            rules: [{ required: true, message: '请填写个人介绍，字数应小于50字。' }],\n          },\n        ]"}],attrs:{placeholder:"请填写个人介绍",type:"textarea"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"所在学院","label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("academy-selector",{directives:[{name:"decorator",rawName:"v-decorator",value:["academy_id",{rules:[{required:!0,message:"请选择您所在学院"}]}],expression:"[\n          'academy_id',\n          {\n            rules: [{ required: true, message: '请选择您所在学院'}],\n          },\n        ]"}]})],1),e._v(" "),a("a-form-item",{attrs:{label:"所属班级","label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("classroom-selector",{directives:[{name:"decorator",rawName:"v-decorator",value:["classroom_id",{rules:[{required:!0,message:"请选择您所在班级"}]}],expression:"[\n          'classroom_id',\n          {\n            rules: [{ required: true, message: '请选择您所在班级'}],\n          },\n        ]"}]})],1),e._v(" "),a("a-form-item",{attrs:{label:"性别","label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["gender",{rules:[{required:!0,message:"请选择您的性别~"}]}],expression:"[\n          'gender',\n          {\n            rules: [{ required: true, message: '请选择您的性别~'}],\n          },\n        ]"}],attrs:{name:"genderRadioGroup"}},[a("a-radio",{attrs:{value:"1"}},[e._v("男")]),e._v(" "),a("a-radio",{attrs:{value:"0"}},[e._v("女")])],1)],1),e._v(" "),a("a-form-item",{attrs:{"wrapper-col":{span:19,offset:5}}},[a("a-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1)],1),e._v(" "),a("a-divider"),e._v(" "),e._m(0)],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-form-style-desc"},[a("h3",[e._v("说明")]),e._v(" "),a("h4",[e._v("身份说明")]),e._v(" "),a("p",[e._v("如果您是教师，学号一栏请填写教工号、所在班级请选择您所在学院的随意班级。")])])}],s=a("3257"),o=a("4c15"),i={components:{AcademySelector:s["a"],ClassroomSelector:o["a"]},data:function(){return{form:this.$form.createForm(this,{name:"basicInfoForm"}),submitLoading:!1,labelCol:{lg:{span:5},sm:{span:5}},wrapperCol:{lg:{span:19},sm:{span:19}}}},methods:{nextStep:function(){var e=this,t=this.form.validateFields;t((function(t,a){t||(console.log(a),e.$emit("form",a),e.$emit("nextStep"))}))}}},l=i,c=a("2877"),u=Object(c["a"])(l,r,n,!1,null,"4538a66e",null);t["default"]=u.exports},3257:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("a-select",{attrs:{placeholder:"请选择学院","default-value":e.value,disabled:e.disabled,"allow-clear":e.allowClear},on:{change:e.handleChange}},e._l(e.options,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.academy_name))])})),1)],1)},n=[],s=(a("c5f6"),a("b775"));function o(){return Object(s["a"])({url:"/api/admin/academies",method:"get"})}var i={props:{value:{type:Number,default:void 0},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1}},data:function(){return{options:[]}},created:function(){this.fetch()},methods:{fetch:function(){var e=this;o().then((function(t){t.status?e.options=t.data:e.$message.error("获取学院列表数据失败")}))},handleChange:function(e){this.$emit("change",e)}}},l=i,c=a("2877"),u=Object(c["a"])(l,r,n,!1,null,null,null);t["a"]=u.exports},"41b5":function(e,t,a){"use strict";var r=a("6e7e"),n=a.n(r);n.a},"4c15":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("a-select",{attrs:{placeholder:"请选择班级","default-value":e.value,disabled:e.disabled,"allow-clear":e.allowClear},on:{change:e.handleChange}},e._l(e.options,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.class_name))])})),1)],1)},n=[],s=(a("c5f6"),a("b775"));function o(){return Object(s["a"])({url:"/api/admin/classrooms",method:"get"})}var i={props:{value:{type:Number,default:void 0},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1}},data:function(){return{options:[]}},created:function(){this.fetch()},methods:{fetch:function(){var e=this;o().then((function(t){t.status?e.options=t.data:e.$message.error("获取班级数据列表失败")}))},handleChange:function(e){this.$emit("change",e)}}},l=i,c=a("2877"),u=Object(c["a"])(l,r,n,!1,null,null,null);t["a"]=u.exports},"6e7e":function(e,t,a){},8651:function(e,t,a){},"8b25":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a("b775");function n(e){var t={mobile:e};return Object(r["a"])({url:"/api/sms",method:"post",data:t})}},"8cd3":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-form",{staticStyle:{margin:"40px auto 0"}},[a("result",{staticStyle:{"max-width":"560px"},attrs:{title:e.isSuccess?"操作成功":"操作失败",type:e.isSuccess?"success":"error",description:e.isSuccess?"即将前往后台页面":"操作失败，请稍后再试"}},[a("div",{attrs:{slot:"action"},slot:"action"},[e.hasSuccess?a("a-button",{on:{click:e.retry}},[e._v("重试")]):a("a-button",{on:{click:e.toBackend}},[e._v("立即前往后台")])],1)])],1)],1)},n=[],s=function(){var e,t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"result"},[r("div",[r("a-icon",{class:(e={icon:!0},e[""+t.type]=!0,e),attrs:{type:t.localIsSuccess?"check-circle":"close-circle"}})],1),t._v(" "),r("div",{staticClass:"title"},[t._t("title",[t._v("\n      "+t._s(t.title)+"\n    ")])],2),t._v(" "),r("div",{staticClass:"description"},[t._t("description",[t._v("\n      "+t._s(t.description)+"\n    ")])],2),t._v(" "),t.$slots.default?r("div",{staticClass:"extra"},[t._t("default")],2):t._e(),t._v(" "),t.$slots.action?r("div",{staticClass:"action"},[t._t("action")],2):t._e()])},o=[],i=(a("6762"),["success","error"]),l={name:"Result",props:{isSuccess:{type:Boolean,default:!1},type:{type:String,default:i[0],validator:function(e){return function(e){return i.includes(e)}}},title:{type:String,default:""},description:{type:String,default:""}},computed:{localIsSuccess:function(){return this.type===i[0]}}},c=l,u=(a("b5db"),a("2877")),d=Object(u["a"])(c,s,o,!1,null,"c420448a",null),p=d.exports,m=p,f={name:"Step3",components:{Result:m},props:{isSuccess:{type:Boolean,default:!1,required:!0}},data:function(){return{successTitle:"操作成功",errorTitle:"操作失败",hasSuccess:!1,seconds:3}},methods:{toBackend:function(){this.$router.push("/")},retry:function(){this.$router.go(0)}}},v=f,h=(a("962a"),Object(u["a"])(v,r,n,!1,null,"12fb2f83",null));t["default"]=h.exports},"962a":function(e,t,a){"use strict";var r=a("ee04"),n=a.n(r);n.a},b5db:function(e,t,a){"use strict";var r=a("8651"),n=a.n(r);n.a},c6c8:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("a-layout",[a("a-layout-header",{staticClass:"align-text-center header"},[a("h3",{staticClass:"header nav-title"},[e._v(e._s(e.navTitle))])]),e._v(" "),a("a-layout-content",{staticClass:"content"},[a("CommonCardFrame",{attrs:{title:"信息填写"}},[a("template",{slot:"extra"},[a("a-button",{on:{click:e.handleLoginOutClick}},[e._v("退出登录")])],1),e._v(" "),a("template",{slot:"body"},[a("a-steps",{staticClass:"steps",attrs:{current:e.currentTab}},[a("a-step",{attrs:{title:"填写基础信息"}}),e._v(" "),a("a-step",{attrs:{title:"绑定手机号"}}),e._v(" "),a("a-step",{attrs:{title:"完成"}})],1),e._v(" "),a("div",{staticClass:"content"},[0===e.currentTab?a("step1",{on:{nextStep:e.nextStep,form:e.handleForm}}):e._e(),e._v(" "),1===e.currentTab?a("step2",{on:{nextStep:e.nextStep,prevStep:e.prevStep,form:e.handleForm,result:function(t){e.isSuccess=t}}}):e._e(),e._v(" "),2===e.currentTab?a("step3",{attrs:{"is-success":e.isSuccess},on:{prevStep:e.prevStep,finish:e.finish}}):e._e()],1)],1)],2)],1),e._v(" "),a("a-layout-footer",{staticClass:"align-text-center footer"},[e._v("\n      Copyright © 2019 - "+e._s(e.nowYear)+". Reacti0n. All rights reserved.\n    ")])],1)],1)},n=[],s=(a("96cf"),a("3b8d")),o=a("12a6"),i=a("d656"),l=a("8cd3"),c=a("b212"),u=a("4360"),d=a("83d6"),p={name:"StepForm",components:{Step1:o["default"],Step2:i["default"],Step3:l["default"],CommonCardFrame:c["a"]},beforeRouteEnter:function(e,t,a){var r=u["a"].getters.isUserVerified;1===r?a({path:"/"}):a()},beforeRouteLeave:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("user/getInfo");case 2:n=u["a"].getters.isUserVerified,0===n?(this.$message.error("请先完成基础信息填写，再访问后台。"),r(!1)):r();case 4:case"end":return e.stop()}}),e,this)})));function t(t,a,r){return e.apply(this,arguments)}return t}(),data:function(){return{currentTab:0,form:{},navTitle:d["title"],isSuccess:!1}},computed:{nowYear:function(){var e=new Date;return e.getFullYear()}},methods:{nextStep:function(){this.currentTab<2&&(this.currentTab+=1)},prevStep:function(){this.currentTab>0&&(this.currentTab-=1)},finish:function(){this.currentTab=0},handleForm:function(e){this.form=Object.assign(e,this.form)},handleLoginOutClick:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("user/loginOut");case 2:this.$router.push("/login?redirect=".concat(this.$route.fullPath));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},m=p,f=(a("41b5"),a("2877")),v=Object(f["a"])(m,r,n,!1,null,"26d216ef",null);t["default"]=v.exports},d656:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("a-form",{staticStyle:{"max-width":"500px",margin:"0 auto 0"},attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"绑定手机号","label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{rules:[{required:!0,whitespace:!0},{validator:e.phoneCheck.bind(this)}]}],expression:"[\n          'mobile',\n          {rules: [{ required: true, whitespace: true},{validator:phoneCheck.bind(this)}]}\n        ]"}],attrs:{placeholder:"请输入您的手机号"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"短信验证码","label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("SendSMS",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{rules:[{required:!0,message:"请输入短信验证码",whitespace:!0}]}],expression:"[\n          'code',\n          {rules: [{ required: true, message: '请输入短信验证码', whitespace: true}]}\n        ]"}],attrs:{phone:e.phoneNum}})],1),e._v(" "),a("a-form-item",{attrs:{"wrapper-col":{span:19,offset:5}}},[a("a-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.nextStep}},[e._v("提交")]),e._v(" "),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.prevStep}},[e._v("上一步")])],1)],1),e._v(" "),a("a-divider"),e._v(" "),e._m(0)],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-form-style-desc"},[a("h3",[e._v("说明")]),e._v(" "),a("h4",[e._v("手机号说明")]),e._v(" "),a("p",[e._v("本次绑定的手机号是您以后唯一联系方式，请确保手机号为您本人所有。")])])}],s=a("c24f"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("a-input-search",{attrs:{placeholder:"请填写验证码"},on:{search:e.handleSendSmsClick,change:e.handleChange}},[a("a-button",{attrs:{slot:"enterButton",disabled:e.hasSendSMS},slot:"enterButton"},[e._v(e._s(e.sendSMSText))])],1)],1)},i=[],l=a("8b25"),c={props:{value:{type:String,default:void 0},phone:{type:String,default:void 0}},data:function(){return{sendSMSText:"获取验证码",hasSendSMS:!1}},methods:{handleSendSmsClick:function(){var e=this;void 0!==this.phone?l["a"](this.phone).then((function(t){t.status&&e.disableSendSmsBtn()})):this.$message.error("请输入正确的手机号后再获取验证码")},handleChange:function(e){this.$emit("change",e)},disableSendSmsBtn:function(){var e=this,t=60;this.sendSMSText=t+"s";var a=setInterval((function(){t--,t<=0?(clearInterval(a),e.hasSendSMS=!1,e.sendSMSText="重新发送"):(e.hasSendSMS=!0,e.sendSMSText=t+"s")}),1e3)}}},u=c,d=a("2877"),p=Object(d["a"])(u,o,i,!1,null,null,null),m=p.exports,f={components:{SendSMS:m},data:function(){return{labelCol:{lg:{span:5},sm:{span:5}},wrapperCol:{lg:{span:19},sm:{span:19}},form:this.$form.createForm(this),loading:!1,phoneNum:void 0}},methods:{phoneCheck:function(e,t,a){var r=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;r.test(t)?(this.phoneNum=t,a()):a("请输入正确的手机号码")},nextStep:function(){var e=this,t=this,a=this.form.validateFields;t.loading=!0,a((function(a,r){a||(t.$emit("form",r),Object(s["a"])(r).then((function(a){var r=a.status;r?t.$emit("nextStep"):t.$message.error(a.message),e.$emit("result",r)})).finally((function(){e.loading=!1})))}))},prevStep:function(){this.$emit("prevStep")}}},v=f,h=Object(d["a"])(v,r,n,!1,null,null,null);t["default"]=h.exports},ee04:function(e,t,a){}}]);